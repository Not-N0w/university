ORG 0x500;
COUNT: WORD 0x000;
ITER: WORD $STR;

START: 
CLA;

L:
IN 7;
AND #0x040;
BEQ L;
LD (ITER)+;
OUT 6;
ST COUNT;

S1:
IN 7;
AND #0x040;
BEQ S1;
LD (ITER);
OUT 6;

LD COUNT;
DEC;
ST COUNT;
BEQ ENDLOOP;

S2:
IN 7;
AND #0x040;
BEQ S2;
LD (ITER)+;
SWAB;
OUT 6;

LOOP COUNT;
JUMP S1;

ENDLOOP: HLT;

ORG 0x59d;
STR:
WORD 3;
WORD 0xDEDF;
WORD 0x00AA;

