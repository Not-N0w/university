ORG 0x0
V0: WORD $DEFAULT, 0x180
V1: WORD $DEFAULT, 0x180
V2: WORD $INT2, 0x180
V3: WORD $INT3, 0x180
V4: WORD $DEFAULT, 0x180
V5: WORD $DEFAULT, 0x180
V6: WORD $DEFAULT, 0x180
V7: WORD $DEFAULT, 0x180
DEFAULT: WORD 0x000;


ORG 0x01C;
X: WORD -27;

START:
DI;
CLA;
OUT 1;

LD #0x2;
OUT 5;

LD #0x3;
OUT 7;


CLA;
OUT 0xB;
OUT 0xF;
OUT 0x13;
OUT 0x17;
OUT 0x1C
OUT 0x1F;

EI;
CLA;
CYCLE:
LD X;
INC;
ST X;

CMP #-27;
BPL EX;
LD #-27; 
ST X;

EX:
JUMP CYCLE;


INT3:
PUSH;
CLA;
ADD X;
ADD X;
ADD X;
ADD X;
ADD X;
ADD #7;
OUT 6;
POP;
IRET;


IN_SAVED: WORD ?;
NOT_X: WORD ?;
NOT_SAVED: WORD ?;
TMP: WORD ?;

INT2:
PUSH;
IN 4;
ST IN_SAVED;
NOT;
ST NOT_SAVED;

LD X;
NOT;
ST NOT_X;

AND IN_SAVED;
ST TMP;
LD X;
AND NOT_SAVED;
OR TMP;
ST X;
POP;
IRET;